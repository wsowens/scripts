# wowscripts

## Directory Structure

This directory contains several subdirectories. All scripts, binaries, and source files are separated into these subdirectories based on the language they were written in.
```
.
├── awk      [AWK Scripts]
│       
├── bash     [Bash Scripts (currently trying to make everything POSIX compliant)]
│
├── bin      [Binaries from other sources, like UCSC's wigToBigWig]
│
├── old      [Outdated scripts that I keep around for reference, do not use them.]
│
├── python   [Python scripts]
│
├── rust     [Rust source files + binaries]
│
└── sbatch   [slurm submission scripts]
```

In this directory, we also have symbolic links pointing to each executable file. For instance:

`lrwxrwxrwx 1 wowens riva   35 Nov 29 18:38 bedsync -> /home/wowens/apps/python/bedsync.py`

These symbolic links just point to the appropriate script/binary and can be executed as if they were a command. 
I recommend adding this directory to the PATH environment variable. 
If you are using Bash, you can just add this line to your `.bashrc`.
```
PATH=$PATH:/ufrc/riva/wowens/apps
```
Now you can simply type `bedsync` anywhere without having to write out the full path. 

I realize this system may seem obfuscated.
You can use the `which` command to see the location of the original script/binary.

```
[wowens@login4 ~]$ which fixdmap
/ufrc/riva/wowens/apps/rust/fixdmap/target/release/fixdmap
```

You can use the `lesswich` command to directly read the source for a script. 
(See below for more information.)

## bedsync
Python script to "sync" or "merge" 2 bedGraph files. That is to say, given the following:

a.bedGraph
```
chr1  10  11  8   4   0.5
chr1  13  15  3   3   1 
```

b.bedGraph
```
chr1  11  12  4   3   0.75
chr1  13  15  5   3   0.6
chr1  20  25  2   1   0.5
```

If you enter:
`bedsync a.bedGraph b.bedGraph a+b.bedGraph```

This will be a+b.bedGraph:
```
ERROR: this script must be debugged.
```

## clip4bw
## filtercov
## fixdmap
## full
## lesswich
## mapped_reads
## nuclear

Source: ./bash/nuclear.sh

Uses Slurm's `srun` command to filter out non-nuclear DNA from an arbitray number of BED-like files. 

Usage:
```
nuclear [bed1] [bed2] ...
```

Output files are named accordingly:

```
Input               Output
test.bed        ->  test.nuclear.bed
test.bedGraph   ->  test.nuclear.bed
test.txt        ->  test.txt.nuclear.bed
```

## prefix
## pyglob
## quickbg

Source: ./bash/quickbg.sh

Uses Slurm's `srun` command to convert an arbitrary number of bedGraphs to bigwigs in parallel. 
You must also provide a chrom.sizes file. 

Usage:
```quickbg [chrom.sizes] [bedGraph1] [bedGraph2]...```

This uses UCSC's bedGraphToBigWig utility.
You can easily copy and edit this script and change the path if you need to use a different binary.

## quickbw

Source: ./bash/quickbg.sh

Uses Slurm's `srun` command to process convert an arbitrary number of wigs to bigwigs in parallel. 
You must also provide a chrom.sizes file. 

Usage:
```quickbw [chrom.sizes] [wig1] [wig2] ...```

This uses UCSC's wigToBigWig utility.
You can easily copy and edit this script and change the path if you need to use a different binary.

*NOTE*: Due to an undocumented bug with wigToBigWig, wigToBigWig may segfault if it encounters fields out of the range specified by the chrom.sizes. 
This occurs even if you uses the -clip option. 
Thus, I recommend clipping your wig files before using `quickbw`, especially if they are coming from they were generated by atacToWig.qsub. 
I have provied the `clip4bw` and `quickclip` commands to do just that. 

## quickclip

Source: ./bash/quickclip.sh

Uses Slurm's `srun` command to clip an arbitrary number of wigs.
That is, any features with start/stop positions that exceed the chromosome's length will be removed.
You must also provide a chrom.sizes file. 

Usage:
```quickclip [chrom.sizes] [wig1] [wig2] ...```

This uses the clip4bw script internally. 
You can easily copy and edit this script and change the path if you need to use a different binary.

## resubmit_qsub
## suffix
## tree

Link to the tree binary, which is not installed on HiPerGator 2.0 as far as I can tell.
More information here:
<https://linux.die.net/man/1/tree>

## unprefix
## unsuffix
## vimwich
## waitfor
## wig2bw

Link to the UCSC wigToBigWig binary.
More information here:

## wigproc
